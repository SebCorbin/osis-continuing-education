{% load staticfiles %}
{% load i18n %}
{% load bootstrap3 %}
<div style="padding: 0.5em;">
    <div class="alert alert-info" style="display:inline-block;">
        <i class="fa fa-info-circle"></i> {% trans 'This page contains the Registrations submitted by the participants. These must be validated by IUFC.' %}
    </div>
    <a class="btn btn-primary pull-right" id="btn_validate_registrations" data-toggle="modal" data-target="#registrations_to_validate_modal">
        <i class="fa fa-check-circle"></i> {% trans 'Validate selected registrations' %}
    </a>
</div>


<table class="table table-striped table-hover" id="order_student">
    <thead>
    <tr>
        <th>
            {% if registrations_to_validate %}
                <input id="id_check_all_registrations_to_validate" type="checkbox" name="check_all"
                       title="{% trans 'Check All' %}"/>
            {% endif %}
        </th>
        <th>{% trans 'Name' %}</th>
        <th>{% trans 'First name' %}</th>
        <th>{% trans 'Email' %}</th>
        <th>{% trans 'Formation' %}</th>
    </tr>
    </thead>
    <tbody>
        <form id="registrations_to_validate_form" method="post" action="{% url 'validate_registrations' %}">
        {% csrf_token %}
        {% for admission in registrations_to_validate %}
            <tr>
                <td>
                    <input type="checkbox" name="selected_registrations_to_validate" class="selected_registrations_to_validate" value="{{ admission.id }}" />
                </td>
                <td>
                    <a href="{% url 'admission_detail' admission_id=admission.id %}#registration">
                        {{ admission.person_information.person.last_name }}
                    </a>
                </td>
                <td>{{ admission.person_information.person.first_name }}</td>
                <td>{{ admission.person_information.person.email }}</td>
                <td>{{ admission.formation }}</td>
            </tr>
        {% endfor %}
        </form>
    </tbody>
</table>

{% include "fragment/tasks/registrations_to_validate_modal.html" %}

{% block script %}
    <script>
        $("#id_check_all_registrations_to_validate").click(function(){
            $('input:checkbox.selected_registrations_to_validate').not(this).prop('checked', this.checked);
        });
    </script>
{% endblock %}

